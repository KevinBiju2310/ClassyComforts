<%- include("../layouts/userHeader") %>

    <style>
        .table td,
        .table th {
            text-align: center;
            vertical-align: middle;
            width: 12.5%;
        }

        .delivery-table {
            width: 50%;
            /* Adjust the width as needed */
            margin: 0 auto;
            /* Center the table horizontally */
            border-collapse: collapse;
            border: 1px solid #ddd;
        }

        .delivery-table th,
        .delivery-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
            /* Center the content horizontally */
        }

        .delivery-table th {
            background-color: #f2f2f2;
        }

        .button-container {
            text-align: center;
            margin-top: 20px;
        }

        .button-container button {
            margin: 0 10px;
        }
    </style>

    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="index.html" rel="nofollow">Home</a>
                    <span></span> Pages
                    <span></span> orderDetails
                </div>
            </div>
        </div>
        <section class="pt-70 pb-70">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 m-auto"> <!-- Adjusted the column width -->
                        <div class="row">
                            <div class="col-md-12"> <!-- Adjusted the column width -->
                                <div class="tab-content dashboard-content">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">Your Orders</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <table class="table table-bordered table-striped ">
                                                    <thead>
                                                        <tr>
                                                            <th>Order Date</th>
                                                            <th>Image</th>
                                                            <th>Product Name</th>
                                                            <th>Status</th>
                                                            <th>Payment Method</th>
                                                            <th>Price</th>
                                                            <th>Quantity</th>
                                                            <th>Total</th>

                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <% order.products.forEach(product=> { %>
                                                            <tr>
                                                                <td>
                                                                    <%= order.createdAt.toDateString() %>
                                                                </td>
                                                                <td><img src="/uploads/<%= product.productId.productImages[0] %>"
                                                                        alt="<%= product.productId.productname %>"
                                                                        style="max-width: 100px;"></td>
                                                                <td>
                                                                    <%= product.productId.productname %>
                                                                </td>
                                                                <td>
                                                                    <%= order.orderStatus %>
                                                                </td>
                                                                <td>
                                                                    <%= order.paymentMethod %>
                                                                </td>
                                                                <td>$<%= product.productId.price.toFixed(2) %>
                                                                </td>
                                                                <td>
                                                                    <%= product.quantity %>
                                                                </td>
                                                                <td>$<%= (product.productId.price *
                                                                        product.quantity).toFixed(2) %>
                                                                </td>

                                                            </tr>
                                                            <% }); %>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-4">

                                        <table class="delivery-table">
                                            <tbody>
                                                <tr>
                                                    <th>Grand Total</th>
                                                    <td>$<%= order.totalAmount.toFixed(2) %>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>Delivery Address</th>
                                                    <td>
                                                        <% order.address.forEach(addr=> { %>
                                                            <address>
                                                                <%= addr.name %><br>
                                                                    <%= addr.address %><br>
                                                                        <%= addr.city %>, <%= addr.state %>
                                                                                <%= addr.pincode %><br>
                                                                                    <%= addr.district %>
                                                            </address>
                                                            <% }); %>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="button-container">
                                        <button id="cancelOrderBtn" class="btn btn-danger">Cancel Order</button>
                                        <button id="downloadInvoiceBtn" class="btn btn-primary">Download
                                            Invoice</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>


    <%- include("../layouts/userFooter") %>